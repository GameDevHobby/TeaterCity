---
phase: 05-furniture-editing-operations
plan: 06
type: execute
wave: 3
depends_on: ["05-01", "05-02", "05-03", "05-04", "05-05"]
files_modified: []
autonomous: false
user_setup: []

must_haves:
  truths:
    - "Player can move furniture by dragging"
    - "Player can delete optional furniture"
    - "Player cannot delete required furniture at minimum count"
    - "Player can add new furniture from picker"
    - "All operations trigger auto-save"
  artifacts: []
  key_links: []
---

<objective>
Verify all furniture editing operations work correctly through human testing.

Purpose: Confirm FUR-03, FUR-04, FUR-05 requirements are met before completing phase.

Output: Human verification of all furniture operations with save persistence.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete furniture editing system:
1. Move operation - drag selected furniture to reposition
2. Delete operation - remove furniture with validation
3. Add operation - place new furniture from picker
4. Visual feedback - drag/placement previews with valid/invalid colors
5. Auto-save integration - all operations trigger save
  </what-built>
  <how-to-verify>
**Setup:**
1. Run the game in Godot Editor
2. Build a room with furniture OR use an existing saved room

**Test Move Operation (FUR-03):**
1. Tap a room to select it (yellow highlight)
2. Tap "Edit Furniture" in menu
3. Tap a piece of furniture to select it (cyan highlight)
4. Press and drag the furniture - should see:
   - Green preview at valid positions
   - Red preview at invalid positions (walls, outside room, overlapping)
   - Faint gray ghost at original position
5. Release on valid position - furniture moves
6. Release on invalid position - furniture returns to original

**Test Delete Operation (FUR-05):**
1. In furniture edit mode, select furniture
2. Note the "Delete" button appears (red)
3. If furniture is optional: tap delete - furniture disappears, list refreshes
4. If furniture is required at minimum count: tap delete - error message shows, furniture remains
5. Verify deleted furniture visual is removed from scene

**Test Add Operation (FUR-04):**
1. In furniture edit mode, tap "+ Add Furniture" button
2. Picker panel appears with allowed furniture
3. Select a furniture type
4. Move cursor - preview follows with valid/invalid colors
5. Tap valid position - furniture placed, visual appears, list refreshes
6. Tap "Cancel" in picker to exit without placing

**Test Auto-Save (PER-01, PER-02):**
1. Perform a move, delete, or add operation
2. Wait 5+ seconds for debounce timer
3. Check console for "RoomManager: Auto-saved N rooms"
4. Close and reopen game
5. Verify furniture changes persisted

**Validation Checks (OVR-03):**
1. Try placing furniture overlapping another furniture - should show red, not place
2. Try placing furniture on wall - should show red, not place
3. Try placing furniture outside room bounds - should show red, not place
4. Try moving furniture to invalid position - should revert to original

**Expected Results:**
- All move operations update furniture position visually and in data
- All delete operations remove furniture (unless blocked by validation)
- All add operations create new furniture with correct visual
- All operations trigger auto-save after 5-second debounce
- Changes persist after game restart
  </how-to-verify>
  <resume-signal>Type "verified" if all tests pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification of all furniture editing features.
</verification>

<success_criteria>
1. Move: Dragging relocates furniture with preview feedback
2. Delete: Removes optional furniture, blocks required furniture deletion
3. Add: Places new furniture from picker with preview feedback
4. Validation: All operations respect collision and room type constraints
5. Persistence: Changes auto-save and survive game restart
</success_criteria>

<output>
After completion, create `.planning/phases/05-furniture-editing-operations/05-06-SUMMARY.md`
</output>
