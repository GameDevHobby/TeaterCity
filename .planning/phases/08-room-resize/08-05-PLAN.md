---
phase: 08-room-resize
plan: 05
type: execute
wave: 4
depends_on: ["08-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can resize room to larger bounds and doors are cleared"
    - "User can resize room to smaller bounds (if furniture fits)"
    - "Resize is blocked when furniture would be outside new bounds"
    - "Resize is blocked when new bounds overlap another room"
    - "User must place doors after resize before exiting"
    - "Resized room persists after game restart"
  artifacts: []
  key_links: []
---

<objective>
Human verification of the complete room resize workflow.

Purpose: Verify all resize requirements are met through hands-on testing. This checkpoint ensures the resize feature works correctly for all scenarios: successful resize, blocked resize (furniture), blocked resize (overlap), door re-placement, and persistence.

Output: Human confirmation that resize workflow is complete and working.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

Requirements being verified:
- EDIT-01: Player can resize room by adjusting walls
- EDIT-02: Resize blocked if furniture would be invalidated
- EDIT-03: Doors reset on resize, player re-places them
- OVR-01: Adjacent rooms can share wall boundaries
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete room resize workflow:
1. RoomEditMenu has "Resize Room" button
2. Clicking button enters resize mode (box drawing)
3. Drag to define new room bounds with live preview
4. Green preview = valid resize, Red preview = invalid
5. Orange highlights on furniture that would be blocked
6. On valid release, room is resized and doors are cleared
7. User must place at least minimum required doors
8. Area2D selection polygon updates to match new bounds
9. Changes persist via auto-save
  </what-built>
  <how-to-verify>
**Test 1: Basic resize (make room larger)**
1. Run the game
2. Create a room with furniture and doors (or use existing)
3. Tap the room to select it
4. In the menu, tap "Resize Room"
5. Drag to define NEW larger bounds (should see green preview)
6. Release - room walls should rebuild at new size
7. Verify: Old doors are gone, you're in door placement mode
8. Place required doors and tap Done
9. Expected: Room now has larger bounds, furniture in same positions

**Test 2: Resize smaller (furniture fits)**
1. Select a room with furniture near the center
2. Tap "Resize Room"
3. Drag to define smaller bounds that still contain all furniture
4. Release and place doors
5. Expected: Room shrinks, furniture stays in place

**Test 3: Resize blocked by furniture**
1. Select a room with furniture near an edge
2. Tap "Resize Room"
3. Try to drag bounds that would cut off the furniture
4. Expected: Red preview, orange highlights on blocked furniture
5. Release - resize should NOT happen (stays in resize mode)

**Test 4: Resize blocked by overlap**
1. Create two rooms near each other
2. Select one room, tap "Resize Room"
3. Try to drag bounds that would overlap the other room
4. Expected: Red preview, resize blocked on release

**Test 5: Adjacent room shared walls**
1. Create two rooms that share a wall (built adjacent)
2. Select one room, resize it AWAY from the shared wall
3. Expected: Shared wall remains intact for the other room

**Test 6: Persistence**
1. Resize a room successfully
2. Place doors
3. Close and reopen the game
4. Expected: Room retains resized bounds, doors, and furniture positions
  </how-to-verify>
  <resume-signal>
Type "approved" if all 6 tests pass.
If issues found, describe which test failed and what happened.
  </resume-signal>
</task>

</tasks>

<verification>
Human verification provides final acceptance of:
- Resize workflow UX
- Validation feedback (colors, blocked furniture)
- Door re-placement requirement
- Persistence across restart
</verification>

<success_criteria>
- All 6 test scenarios pass
- Human confirms resize workflow meets requirements EDIT-01, EDIT-02, EDIT-03, OVR-01
</success_criteria>

<output>
After completion, create `.planning/phases/08-room-resize/08-05-SUMMARY.md`
</output>
